<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title> EcoShine | Smart Solar Panel Cleaning</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- AOS (Animate On Scroll) -->
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css" />

    <link rel="icon" type="image/x-icon" href="./imgs/logo.png">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold fs-4" href="index.html">
                <i class="bi bi-sun me-2 text-warning"></i> EcoShine
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navMenu">
                <ul class="navbar-nav ms-auto text-center align-items-center" id="navLinks">
                    <!-- These links will be replaced dynamically -->
                    <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="register.html">Register</a></li>
                    <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="booking.html">Book Cleaning</a></li>
                    <li class="nav-item"><a class="nav-link" id="dashboardLink" href="dashboard.html">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">How are We</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero d-flex align-items-center text-light">
        <div class="container text-center text-md-start" data-aos="fade-up">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Shine Brighter with Smart Solar Cleaning</h1>
                    <p class="lead">Keep your panels working efficiently with our autonomous cleaning robots. Book
                        cleanings, track performance, and monitor your panels — all in one place.</p>
                    <div class="mt-4">
                        <a href="register.html" class="btn btn-warning btn-lg m-2">Get Started</a>
                        <a href="booking.html" class="btn btn-outline-light btn-lg">Book Now</a>
                    </div>
                </div>
                <div class="col-lg-6 text-center mt-4 mt-lg-0">
                    <img src="./imgs/SolarPanelsShutterstock-scaled.jpg" alt="Solar panels placeholder"
                        class="img-fluid rounded-4 shadow-lg m-1">

                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5 bg-light">
        <div class="container text-center">
            <h2 class="fw-bold mb-5" data-aos="fade-down">Why Choose  EcoShine?</h2>
            <div class="row g-4">
                <div class="col-md-4" data-aos="zoom-in">
                    <div class="card border-0 shadow-sm h-100 p-4">
                        <i class="bi bi-robot display-4 text-warning mb-3"></i>
                        <h5 class="fw-bold">Smart Robot Cleaning</h5>
                        <p class="text-muted">Fully automated cleaning using precision-guided robots designed to clean
                            efficiently without harming your panels.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="zoom-in" data-aos-delay="100">
                    <div class="card border-0 shadow-sm h-100 p-4">
                        <i class="bi bi-cloud-arrow-up display-4 text-warning mb-3"></i>
                        <h5 class="fw-bold">Upload & Track</h5>
                        <p class="text-muted">Upload photos, view cleaning results, and get performance reports — all
                            from your personal dashboard.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="zoom-in" data-aos-delay="200">
                    <div class="card border-0 shadow-sm h-100 p-4">
                        <i class="bi bi-calendar-check display-4 text-warning mb-3"></i>
                        <h5 class="fw-bold">Easy Online Booking</h5>
                        <p class="text-muted">Schedule cleaning sessions instantly and manage your appointments with a
                            single click.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About / Process Section -->
    <section class="py-5 text-light process-section">
        <div class="container text-center">
            <h2 class="fw-bold mb-4" data-aos="fade-down">How It Works</h2>
            <div class="row g-4">
                <div class="col-md-3" data-aos="fade-up">
                    <div class="step p-3 rounded-4 shadow">
                        <h1 class="text-warning fw-bold">1</h1>
                        <p>Register your account</p>
                    </div>
                </div>
                <div class="col-md-3" data-aos="fade-up" data-aos-delay="100">
                    <div class="step p-3 rounded-4 shadow">
                        <h1 class="text-warning fw-bold">2</h1>
                        <p>Upload your panel photos</p>
                    </div>
                </div>
                <div class="col-md-3" data-aos="fade-up" data-aos-delay="200">
                    <div class="step p-3 rounded-4 shadow">
                        <h1 class="text-warning fw-bold">3</h1>
                        <p>Book your cleaning slot</p>
                    </div>
                </div>
                <div class="col-md-3" data-aos="fade-up" data-aos-delay="300">
                    <div class="step p-3 rounded-4 shadow">
                        <h1 class="text-warning fw-bold">4</h1>
                        <p>Monitor your cleaning progress</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

  <section id="contact" class="py-5 bg-light">
  <div class="container">
    <h2 class="fw-bold mb-3 text-center" data-aos="fade-down">Contact Us</h2>
    <p class="text-center text-muted mb-5">Have questions? We’d love to hear from you.</p>

    <form id="contactForm" class="row g-3 mx-auto" style="max-width: 700px;" data-aos="fade-up">
      <div class="col-md-6">
        <input type="text" id="contactName" class="form-control" placeholder="Full Name" required>
      </div>
      <div class="col-md-6">
        <input type="email" id="contactEmail" class="form-control" placeholder="Email" required>
      </div>
      <div class="col-12">
        <textarea id="contactMessage" class="form-control" rows="4" placeholder="Your Message" required></textarea>
      </div>
      <div class="col-12 text-center">
        <button type="submit" class="btn btn-warning btn-lg w-100">
          <i class="bi bi-send-fill me-2"></i> Send Message
        </button>
      </div>
    </form>

    <p id="contactStatus" class="text-center mt-3 fw-bold"></p>
  </div>
</section>

    <!-- Footer -->
    <footer class="py-4 bg-dark text-light text-center">
        <div class="container">
            <p class="mb-0">© <span id="year"></span>  EcoShine  </p>
        </div>
    </footer>

    <!-- JS Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 900, once: true });
        document.getElementById('year').textContent = new Date().getFullYear();
        window.addEventListener('scroll', function () {
            const navbar = document.querySelector('.navbar');
            navbar.classList.toggle('scrolled', window.scrollY > 50);
        });
    </script>
    <!-- Firebase connection -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getDatabase, ref, set, push, onValue, update }
            from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";
        import { getStorage, ref as sRef, uploadBytes, getDownloadURL }
            from "https://www.gstatic.com/firebasejs/12.4.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBGSfwSqmK239i6CMP5mIItp_Xj-mwYV2I",
            authDomain: "solar-cleaning-website.firebaseapp.com",
            databaseURL: "https://solar-cleaning-website-default-rtdb.firebaseio.com",
            projectId: "solar-cleaning-website",
            storageBucket: "solar-cleaning-website.appspot.com",
            messagingSenderId: "454039844879",
            appId: "1:454039844879:web:8051aac69c8ac7baf50b7a",
            measurementId: "G-THCL9Q4WYX"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const storage = getStorage(app);

        // make them global
        window.db = db;
        window.ref = ref;
        window.set = set;
        window.push = push;
        window.onValue = onValue;
        window.update = update;
        window.storage = storage;
        window.sRef = sRef;
        window.uploadBytes = uploadBytes;
        window.getDownloadURL = getDownloadURL;
    </script>
    <script>
        // Get user info from localStorage
        const user = JSON.parse(localStorage.getItem("loggedUser"));
        const navLinks = document.getElementById("navLinks");
    </script>


    <script>

        if (user) {
            // Profile image
            let imgSrc = "https://cdn-icons-png.flaticon.com/512/149/149071.png";
            if (user.panelPhoto && user.panelPhoto.includes("drive.google")) {
                const match = user.panelPhoto.match(/[-\w]{25,}/);
                if (match) imgSrc = `https://drive.google.com/uc?export=view&id=${match[0]}`;
            } else if (user.panelPhoto) {
                imgSrc = user.panelPhoto;
            }

            // Rebuild Navbar
            navLinks.innerHTML = `
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="booking.html">Book Cleaning</a></li>
      <li class="nav-item"><a class="nav-link" href="My Bookings.html"">My Book Cleaning</a></li>
      
      <li class="nav-item"><a class="nav-link" href="about.html"">How are We</a></li>
      ${user.isAdmin ? `<li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>             <li class="nav-item"><a class="nav-link " href="messages.html">Client Messages</a></li>
   <li class="nav-item"><a class="nav-link " href="users managment.html">Manage Users</a></li>
` : ""}


      

      <li class="nav-item dropdown ms-3">
        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown"
           role="button" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="${imgSrc}" alt="User" class="rounded-circle me-2" style="width:35px; height:35px; object-fit:cover;">
          <span class="fw-bold text-warning">${user.fullName.split(" ")[0]}</span>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow">
          <li><a class="dropdown-item" href="profile.html"><i class="bi bi-person me-2"></i>Profile</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" href="#" id="logoutBtn"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
        </ul>
      </li>
    `;

            // Logout function
            document.getElementById("logoutBtn").addEventListener("click", () => {
                localStorage.removeItem("loggedUser");
                window.location.href = "login.html";
            });
        }
    </script>
<script type="module">
  import { ref, push, set } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

//   const db = window.db; // use the same db from the global firebase connection
//   const user = JSON.parse(localStorage.getItem("loggedUser"));
  const contactForm = document.getElementById("contactForm");
  const statusMsg = document.getElementById("contactStatus");

  contactForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("contactName").value.trim();
    const email = document.getElementById("contactEmail").value.trim();
    const message = document.getElementById("contactMessage").value.trim();

    if (!name || !email || !message) {
      statusMsg.textContent = "⚠️ Please fill in all fields.";
      statusMsg.className = "text-warning fw-bold text-center";
      return;
    }

    try {
      const messageRef = push(ref(db, "messages"));
      const data = {
        name,
        email,
        message,
        username: user ? user.username : "guest",
        fullName: user ? user.fullName : name,
        userEmail: user ? user.email : email,
        userPhone: user ? (user.phone || "not provided") : "guest",
        dateSent: new Date().toLocaleString(),
      };

      await set(messageRef, data);

      statusMsg.textContent = "✅ Message sent successfully!";
      statusMsg.className = "text-success fw-bold text-center";

      contactForm.reset();
      setTimeout(() => (statusMsg.textContent = ""), 3000);
    } catch (error) {
      console.error("Message send error:", error);
      statusMsg.textContent = "❌ Failed to send message. Please try again.";
      statusMsg.className = "text-danger fw-bold text-center";
    }
  });
</script>



    <script>
        // Get the dashboard link
        const dashboardLink = document.getElementById("dashboardLink");
        if (dashboardLink) dashboardLink.style.display = "none"; // Hide by default


        if (user && user.isAdmin === true) {
            // Show dashboard for admins
            dashboardLink.style.display = "block";
        } else {
            // Make sure it's hidden for normal users or guests
            if (dashboardLink) dashboardLink.style.display = "none";
        }
    </script>

</body>

</html>